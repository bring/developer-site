{{ $parameters := .parameters }}
{{ $name := "" }}

{{ $parameterTypes := slice }}
{{ range .parameters }}
  {{ $parameterTypes = $parameterTypes | append .in }}
{{ end }}
{{ $parameterTypes = uniq $parameterTypes }}

<h3>Request</h3>
{{ range $parameterTypes }}
  {{ $paramsHeader := . }}
  <h4 class="mb-border bb pbxs fw600"><span class="ttc">{{ $paramsHeader }}</span> parameters</h4>
  <dl class="desc-list mbl">
  {{ range $parameters }}
    {{ if eq .in $paramsHeader }}
      {{ $example := "" }}
      {{ $enum := slice }}
      {{ $type := "any" }}

  <div class="flex flex-wrap mb-border bb bw1 pvs">
    <dt class="fwn plxs">
      <code class="bg-white">{{ .name }}</code>
      {{ if eq .required true }}
        <br><span class="mb-badge mb-badge--red">Required</span>
      {{ end }}
    </dt>
    <dd class="plxs">
      {{ .description }}
      {{ range $key,$value := . }}
        {{ if eq $key "name" }}
          {{ $name = $value }}
        {{ end }}

        {{ if reflect.IsMap . }}
          {{ if eq $key "schema" }}
            {{ range $k,$v := $value }}
              {{ if eq $k "type" }}
                {{ $type = $v }}
              {{ end }}
              {{ if eq $k "enum" }}
                {{ $enum = $v }}
              {{ end }}
            {{ end }}
          {{ end }}
        {{ else if eq $key "example" }}
          {{ $example = delimit (slice $name $value) "=" }}
        {{ end }}
      {{ end }}

      {{ if and (reflect.IsSlice $enum) ( gt (len $enum) 0 ) }}
        <div class="mbs">
          <div class="text-note">
            {{ if gt (len $enum) 1 }}
              Enum:
            {{ else }}
              Value:
            {{ end }}
          </div>
          {{ range $enum }}
            <code class="mbxs db maxwmaxc">{{.}}</code>
          {{ end }}
        </div>
      {{ end }}

      {{ if gt (len $example) 0 }}
        <div class="ptxs mbs">
          <div class="text-note">Example:</div>
          <code>{{$example}}</code>
        </div>
      {{ end }}

      <div class="text-note gray">
        {{$type}}
      </div>
    </dd>
  </div>
    {{ end }}
  {{ end }}
  </dl>
{{ end }}
