{{- $hasExamples := false -}}
{{- range .requestBody -}}
  {{- if reflect.IsMap . -}}
    {{- range . -}}
      {{- if isset . "examples" -}}
        {{- $hasExamples = true -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- if $hasExamples -}}
  {{- $endpointId := .endpointId -}}

  <h3>Request example</h3>
  {{- $codeExample := "" -}}
  <div class="bg-gray3 rad-t2px mts">
      {{- with .requestBody -}}
        <div class="relative bg-gray4 example-wrap" data-example="{{$endpointId}}">

          {{ $showFormatMenu := 0 }}
          {{ range $application, $_ := . }}
            {{ if or (in $application "json") (in $application "xml") }}
              {{ $showFormatMenu = add $showFormatMenu 1 }}
            {{ end }}
          {{ end }}

          {{ if gt $showFormatMenu 1 }}
            <div class="mhm ptm">
              <select class="form__control w100p mb0 pas hauto" name="formats" data-example-sub aria-label="Select format">
                {{ range $application, $_ := . }}
                    <option value="{{$application}}">{{$application}}</option>
                {{ end }}
              </select>
            </div>
          {{ end }}

          {{- range $application, $_ := .content -}}
            {{- $format := "" -}}
            {{- if in $application "json" -}}
              {{- $format = "json" -}}
            {{- else if in $application "xml" -}}
              {{- $format = printf "xml" -}}
            {{- end -}}

            {{- if isset . "examples" -}}
              {{- if gt (len .examples) 1 -}}
                <div class="mhm ptm">
                  <select class="form__control w100p mb0 pas hauto" name="{{$format}}-{{$endpointId}}" data-example-sub aria-label="{{$endpointId}} {{$format}} request example">
                    {{- range $name, $_ := .examples -}}
                      {{- $exId := print $name | anchorize -}}
                      <option value="{{$exId}}">{{$name}}</option>
                    {{- end -}}
                  </select>
                </div>
              {{ else }}
                {{/*  Hiding title for the moment  */}}
                {{/*  {{- range $name, $_ := .examples -}}
                  {{ if $name }}
                    <h4 class="mb0 phm pvm fw600 bg-gray3">{{$name}}</h4>
                  {{ end }}
                {{ end }}  */}}
              {{- end -}}
              {{- range $name,$_ := .examples -}}
                {{- $exId := print $name | anchorize -}}
                <div class="relative" data-example-sub="{{$exId}}" data-format="{{$application}}">
                  {{- partial (printf "api/oas/example-%s.html" $format) . -}}
                  {{- partial "api/oas/copy-btn.html" -}}
                </div>
              {{- end -}}
            {{- end -}}
          {{- end -}}
        </div>
      {{- end -}}
  </div>
{{- end -}}
