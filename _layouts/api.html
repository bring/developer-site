---
layout: default
---

<h1 class="centerify">{{ page.api.title }}</h1>

<div class="container">
{% for chapter in page.api.documentation %}
    <h2 id="{{ chapter.title | slugify }}"><a href="#{{ chapter.title | slugify }}">{{ chapter.title }}</a></h2>
    <article class="documentation">
      {{ chapter.content | markdownify }}
    </article>
{% endfor %}
</div>

<div class="container">
  <h2>Overview of endpoints</h2>
  <p>Base URL: <code>{{ page.api.base_uri }}</code></p>
  <table class="default">
    <thead>
      <th>Method</th>
      <th>Endpoint</th>
      <th>Usage</th>
      <th>Returns</th>
    </thead>
    {% for resource in page.api.resources %}
      {% for method in resource.methods %}
        <tr>
          <td>{{ method[1].method }}</td>
          <td>{{ resource.relative_uri }} </td>
          <td>{{ resource.description }}</td>
          <td>{{ resource.display_name }}</td>
        </tr>
      {% endfor %}
    {% endfor %}
  </table>
</div>


{% for resource in page.api.resources %}

  {% if resource.uri_parameters contains 'mediaTypeExtension' %}
    {% for extension in resource.uri_parameters.mediaTypeExtension.enum %}
      {% assign absolute_extension = resource.absolute_uri | replace:'{mediaTypeExtension}',extension %}
      {% assign relative_extension = resource.relative_uri | replace:'{mediaTypeExtension}',extension %}
      {% unless forloop.first %}
        {% assign absoluteUriTitle = absoluteUriTitle | append: '<br/>'  %}
        {% assign relativeUriTitle = relativeUriTitle | append: ' or '  %}
      {% endunless %}
      {% assign absoluteUriTitle = absoluteUriTitle | append: absolute_extension  %}
      {% assign relativeUriTitle = relativeUriTitle | append: relative_extension  %}
    {% endfor %}
  {% else %}
    {% assign absoluteUriTitle = resource.absolute_uri %}
    {% assign relativeUriTitle = resource.relative_uri %}
  {% endif %}

  {% for method in resource.methods %}
    <div class="container">

      <h1>{{ method[1].method }} {{ resource.display_name }}</h1>

      <h2>URL:</h2>
      <p><code>{{ absoluteUriTitle }}</code></p>

      {% if resource.description %}
        <h2>About</h2>
        <p>{{ resource.description }}</p>
      {% endif %}

      <h2>API explorer</h2>

      <form action="{{ resource.absolute_uri }}" method="{{ method.method }}">

      {% if resource.secured_by.size > 0 %}
        {% assign auth_required = true %}
        {% for security in resource.secured_by %}
          {% if !security %}
            {% assign auth_required = false %}
          {% endif %}
        {% endfor %}
        {% for security in resource.secured_by %}
          {% if security %}
            <h3>Authentication{% if auth_required == false %} (optional) {% endif %}</h3>
            {% assign sec_scheme = page.api.security_schemes[security] %}
            {% for header in sec_scheme.described_by.headers %}
              <div class="form-row form-cell">
              <label class="separator">{{ header[1].name }}
                <input type="text" name="{{ header[1].name }}" placeholder="{{ header[1].example }}" />
              </label>
              </div>
            {% endfor %}
          {% endif %}
        {% endfor %}
      {% endif %} <!-- if secured_by -->

      </form>

    </div> <!-- /container -->
  {% endfor %} <!-- /for method in methods -->
{% endfor %}
